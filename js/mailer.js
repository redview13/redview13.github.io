"use strict";!function(){function e(e){return document.querySelector('.button--mail__wrapper input[name="'+e+'"]').value}function a(e,t,s){s=s||500,e.classList.add(t),setTimeout(function(e,t){e.classList.remove(t)},s,e,t)}var t=!1,r=!1,o="",c=e("send_url"),l=e("client_guid"),u=e("list_id"),m=document.querySelector(".form__input"),f=document.querySelector(".button--mail__label"),L=document.querySelector(".button"),_=document.querySelector(".form_after.error"),s=document.querySelector(".form__submit"),v=document.querySelector(".form"),y=document.querySelector(".form_validation.input_empty"),h=document.querySelector(".form_validation:not(.input_empty)");m&&(m.addEventListener("keyup",function(){m.value!==o&&(y.classList.add("hidden"),h.classList.add("hidden"),v.classList.remove("form_error"))},!1),m.addEventListener("input",function(){0<m.value.length&&(f.classList.contains("unfocused")||f.classList.add("unfocused"))},!1),L.addEventListener("click",function(){t||(v.classList.remove("hidden"),L.classList.remove("button_1step"),document.querySelector(".button").style.backgroundColor="transparent",document.querySelector(".submit__icon").classList.add("submit-animate"),t=!0)},!1),_.addEventListener("click",function(e){e.preventDefault(),_.classList.contains("hidden")||(_.classList.add("hidden"),v.classList.remove("hidden"))},!1),s.addEventListener("click",function(e){if(e.preventDefault(),!r){var t=m.value,s=document.querySelector(".form_after.success.has_alredy"),d=document.querySelector(".form_after.success:not(.has_alredy)"),n=document.querySelector(".form__submit_loader");if(v.classList.remove("form_error"),y.classList.add("hidden"),h.classList.add("hidden"),d.classList.add("hidden"),_.classList.add("hidden"),s.classList.add("hidden"),""===t)y.classList.remove("hidden"),f.style.display="none",o=t,a(v,"form_error");else if(function(e){return/^([a-zA-Z0-9_.+-])+@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)}(t)){r=!0,n.classList.remove("hidden");var i=new XMLHttpRequest;i.open("POST",c,!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.onreadystatechange=function(){if(4===i.readyState){var t={};try{t=JSON.parse(i.responseText)}catch(e){t={}}var e=t.data||{};200!==i.status||!0!==t.success?(v.classList.add("hidden"),_.classList.remove("hidden"),L.classList.add("after"),n.classList.add("hidden"),r=!1):(v.classList.add("hidden"),n.classList.add("hidden"),L.classList.add("after"),e.isExists?s.classList.remove("hidden"):d.classList.remove("hidden")),r=!1}},i.send("email="+t+"&list_id="+u+"&build_guid="+l)}else h.classList.remove("hidden"),f.style.display="none",o=t,a(v,"form_error")}},!1))}();